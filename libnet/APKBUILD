# Contributor: Aleksey Bobylev <al.bobylev@gmail.com>
# Maintainer: Aleksey Bobylev <al.bobylev@gmail.com>
pkgname="libnet"
_pkgver="1.2-rc3"
pkgver="1.2_rc3"
pkgrel=0
pkgdesc="API for commonly used low-level net functions"
url="https://sourceforge.net/projects/libnet-dev/"
arch="all"
license="BSD"
makedepends="automake libtool"
subpackages="$pkgname-dev"
source="https://github.com/sam-github/libnet/archive/$pkgname-$_pkgver.tar.gz
	libnet.patch"
builddir="$srcdir/$pkgname-$pkgname-$_pkgver/$pkgname"
options="!check"

prepare() {
	default_prepare

	# documentation is absent -> build is broken
	sed -i 's|doc||' Makefile.am

	# github sources need to be preprocessed
	mkdir m4
	autoreconf -i
}

build() {
	./configure \
		--prefix=/usr \
		--disable-static
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="9b3e7bba973364a91623c099330b2021f1cefd73ecf340dcd775fca3197bc858b97298fd520bbb2f5a64903db35edc72cda96a61e4da4ce6eeb8686f41744be4  libnet-1.2-rc3.tar.gz
cc08a1c8bf0d7c1857217994c167e736334dd5a5fe576c8fd57373b4f91fe906d227888a8aebdd7c0395fcf54f7ad19b358c80bfe79435b34c188e6153fdaad5  libnet.patch"
