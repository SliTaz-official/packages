# Contributor: Aleksey Bobylev <al.bobylev@gmail.com>
# Maintainer: Aleksey Bobylev <al.bobylev@gmail.com>
pkgname="gpicview"
pkgver="0.2.5"
pkgrel=0
pkgdesc="Lightweight image viewer"
url="https://wiki.lxde.org/en/GPicView"
arch="all"
license="GPL2"
makedepends="intltool gtk+2.0-dev libjpeg-turbo-dev"
subpackages="$pkgname-lang"
source="https://downloads.sourceforge.net/lxde/$pkgname-$pkgver.tar.xz
	lang.patch"
options="!check"

prepare() {
	default_prepare
	sed -i 's|Utility;||' gpicview.desktop.in
}

build() {
	./configure \
		--prefix=/usr
	sed -i 's| -shared | -Wl,-Os,--as-needed\0|g' libtool
	make
}

package() {
	make DESTDIR="$pkgdir" install

	# skip icons (found in the icon theme)
	rm -r "$pkgdir"/usr/share/gpicview/pixmaps

	# remove whitespace for smaller size (9687->6725)
	sed -i 's|^ *||' "$pkgdir"/usr/share/gpicview/ui/pref-dlg.ui
}

sha512sums="afc7e67c7ae1252f9c1816ee46fe69e96ea7be9a60e03406a539f17b2e4f0e4b93a028c6f3f1c455f5433d6d7d78a58dcee2cb0ac91ea53093a21935bf454afd  gpicview-0.2.5.tar.xz
d4eeef1da715bfff5cfc1aac50af9e1ba170ce2f043e20b77fa2de46a1444d433f1245ae5f38b8e01f47586e7ca229c42d6073c62451c32bbedabca7384a3ebe  lang.patch"
