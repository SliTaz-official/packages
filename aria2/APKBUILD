# Contributor: Aleksey Bobylev <al.bobylev@gmail.com>
# Maintainer: Aleksey Bobylev <al.bobylev@gmail.com>
pkgname="aria2"
pkgver="1.34.0"
pkgrel=0
pkgdesc="A download utility with resuming and segmented downloading with HTTP/HTTPS/FTP support"
url="https://aria2.github.io/"
arch="all"
license="GPL2"
makedepends="zlib-dev libxml2-dev gnutls-dev gmp-dev nettle-dev"
subpackages="$pkgname-doc $pkgname-lang"
source="https://github.com/aria2/aria2/releases/download/release-$pkgver/$pkgname-$pkgver.tar.xz"
options="!check"

build() {
	./configure \
		--prefix=/usr \
		--enable-epoll \
		--enable-threads=posix \
		--with-libz \
		--without-sqlite3 \
		--without-openssl
	sed -i 's| -shared | -Wl,-Os,--as-needed\0|g' libtool
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="80bc43e242c06acc95030021cb347b4ec230729f3d7e512ca1932941b34ef95c312a34007a226869e5d720839a400e66cdb072ccab5d42228d8cf3d828723dcc  aria2-1.34.0.tar.xz"
