# Contributor: Aleksey Bobylev <al.bobylev@gmail.com>
# Maintainer: Aleksey Bobylev <al.bobylev@gmail.com>
pkgname="abcde"
pkgver="2.9.2"
pkgrel=0
pkgdesc="A Better CD Encoder"
url="https://abcde.einval.com/wiki/"
arch="noarch"
license="GPL2"
depends="bash perl cd-discid py3-eyed3"
subpackages="$pkgname-doc"
source="https://abcde.einval.com/download/$pkgname-$pkgver.tar.gz \
	busybox-wget.patch
	fix-mp3-tagging.patch
	less.patch"
options="!check"

prepare() {
	default_prepare
	sed -e 's|normalize-audio|normalize|g' -i abcde
}

package() {
	make \
		abcde_version=abcde-$pkgver \
		prefix=/usr \
		DESTDIR="$pkgdir" \
		install
}

sha512sums="ef0048edf040ed5afee6fdd77377800ec02a3ba323647edd6d384679671b47eee63d8bd1c72ce6fe5ed3ab087a3d7f4024ab39e644be4ab8a92f5c5c0ddabfb5  abcde-2.9.2.tar.gz
01bf087b731d1d574ca4e8a7d5482415924d163b49a59046a0f74b52c4e49feb49781adeb704b5399ab3a5a4fda658aef8e9e94c1e58e1cb09827c39e7747560  busybox-wget.patch
3163168f6770eb83dfbc2d54d396cbcca991aae54d4291e4a17e749622b5d79d29a14667264967b7b51370a718df267cd93daa3cf770cbe829325795fbe82449  fix-mp3-tagging.patch
bb9c7dd913e84dd721529ee002c4f085158a3d086520bc4914f9fd70d85da592c17091f272ca56e5a76eebc04b372e77f2241407fb2168f701a33725621e1229  less.patch"
