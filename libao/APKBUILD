# Contributor: Aleksey Bobylev <al.bobylev@gmail.com>
# Maintainer: Aleksey Bobylev <al.bobylev@gmail.com>
pkgname="libao"
pkgver="1.1.0"
pkgrel=0
pkgdesc="Cross-platform audio output library and plugins"
url="https://ftp.osuosl.org/pub/xiph/releases/ao/"
arch="all"
license="GPL2"
makedepends="alsa-lib-dev"
subpackages="$pkgname-doc $pkgname-dev"
source="$url$pkgname-$pkgver.tar.gz
	libao.conf"
options="!check"

build() {
	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--enable-alsa \
		--disable-arts
	sed -i 's| -shared | -Wl,-Os,--as-needed\0|g' libtool
	make
}

package() {
	make DESTDIR="$pkgdir" install

	# Add conf file
	install -Dm644 "$srcdir/libao.conf" "$pkgdir/etc/libao.conf"
}

sha512sums="8eee73cfd3ffd79b5cae76fc3ad88270b56cc49dfbf4599c4ed591b259b79475e396c984abde94118a916fba20db84e26ac8e51dbf5efd4bb10341328ca0615a  libao-1.1.0.tar.gz
328d997ca918f41aea450f97d83f81b92ff9fe2e9bdbea6de31fb6f016432b7527792af7c66e481a6c018b279f79b329ae708cf1fe4c65da29246c9a95ceaca1  libao.conf"
